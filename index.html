<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a de Nivelaci√≥n: Algoritmos</title>
    
    <!-- Carga de Librer√≠as (React, ReactDOM, Babel, Tailwind) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <!-- Estilos Base -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .code-bg { background-color: #1e293b; color: #e2e8f0; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .progress-bar { transition: width 0.5s ease-out; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        
        /* Scrollbar personalizada */
        .custom-scrollbar::-webkit-scrollbar { height: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #4f46e5; border-radius: 4px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONOS ---
        const Icon = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Terminal = (props) => <Icon {...props}><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></Icon>;
        const RefreshCw = (props) => <Icon {...props}><path d="M21 2v6h-6"></path><path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path><path d="M3 22v-6h6"></path><path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path></Icon>;
        const Layers = (props) => <Icon {...props}><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></Icon>;
        const Box = (props) => <Icon {...props}><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></Icon>;
        const Save = (props) => <Icon {...props}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></Icon>;
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>;
        const Code = (props) => <Icon {...props}><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></Icon>;
        const FileText = (props) => <Icon {...props}><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></Icon>;
        const AlertCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></Icon>;
        const Play = (props) => <Icon {...props}><polygon points="5 3 19 12 5 21 5 3"></polygon></Icon>;
        const ChevronRight = (props) => <Icon {...props}><polyline points="9 18 15 12 9 6"></polyline></Icon>;
        const Home = (props) => <Icon {...props}><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></Icon>;
        const PenTool = (props) => <Icon {...props}><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></Icon>;

        // --- DATOS DEL CONTENIDO ---

        const modulesData = [
            {
                id: 'fundamentos',
                title: 'M√≥dulo 1: Fundamentos y Variables',
                icon: <Terminal size={24} />,
                description: 'Variables, Tipos de datos, Operadores e Ingreso por teclado.',
                theory: [
                    {
                        title: 'Tipos de Datos y Variables',
                        content: 'Python infiere el tipo de dato. Usamos int (enteros), float (decimales) y str (texto). Las variables deben tener nombres descriptivos en min√∫sculas (snake_case).',
                        code: `edad = 17          # int\naltura = 1.75      # float\nnombre = "Ana"     # str`
                    },
                    {
                        title: 'Entrada y Conversi√≥n',
                        content: 'input() siempre devuelve texto. Para hacer c√°lculos num√©ricos, debemos convertir (castear) el valor usando int() o float().',
                        code: `texto = input("Edad: ") \nnumero = int(texto)`
                    },
                    {
                        title: 'Manipulaci√≥n de Strings',
                        content: 'Podemos unir textos (+) o usar f-strings para insertar valores. M√©todos como .lower() ayudan a normalizar el texto.',
                        code: `print(f"Hola {nombre}")\nresp = opcion.lower()`
                    }
                ],
                projectLink: 'Conceptos esenciales para cualquier programa interactivo.',
                quiz: [
                    {
                        question: "¬øQu√© tipo de dato devuelve por defecto la funci√≥n `input()`?",
                        options: ["Entero (int)", "Texto (str)", "Decimal (float)", "Booleano (bool)"],
                        correct: 1,
                        explanation: "Sin importar qu√© escriba el usuario, `input()` siempre captura la entrada como una cadena de texto."
                    },
                    {
                        question: "Si `a = '10'` y `b = '20'`, ¬øqu√© imprime `print(a + b)`?",
                        options: ["30", "1020", "Error", "10 20"],
                        correct: 1,
                        explanation: "Al ser cadenas de texto, el operador `+` las concatena (une), no realiza una suma matem√°tica."
                    },
                    {
                        question: "¬øCu√°l es la forma correcta de convertir un texto ingresado a n√∫mero entero?",
                        code: 'valor = ____(input("Ingrese cantidad: "))',
                        options: ["str", "integer", "int", "float"],
                        correct: 2,
                        explanation: "La funci√≥n `int()` toma un texto num√©rico y lo transforma en un valor de tipo entero."
                    },
                    {
                        question: "¬øPara qu√© sirve el m√©todo `.lower()` aplicado a un texto?",
                        code: 'respuesta = entrada.lower()',
                        options: ["Convierte todo a may√∫sculas", "Convierte todo a min√∫sculas", "Elimina espacios", "Borra el texto"],
                        correct: 1,
                        explanation: "Es √∫til para validar respuestas del usuario sin importar si us√≥ may√∫sculas o min√∫sculas."
                    },
                    {
                        question: "¬øCu√°l de estas variables sigue la convenci√≥n correcta (snake_case)?",
                        options: ["NombreUsuario", "nombre usuario", "nombre_usuario", "1nombre"],
                        correct: 2,
                        explanation: "En Python, las variables se escriben en min√∫sculas y las palabras se separan con guiones bajos."
                    },
                    {
                        question: "Si quiero mostrar el valor de una variable dentro de un texto, uso:",
                        code: 'nombre = "Luis"',
                        options: ['print("Hola {nombre}")', 'print(f"Hola {nombre}")', 'print("Hola" + {nombre})', 'print(Hola, nombre)'],
                        correct: 1,
                        explanation: "Las `f-strings` (indicadas con una `f` antes de las comillas) permiten inyectar variables entre llaves `{}`."
                    },
                    {
                        question: "¬øQu√© operador se usa para la asignaci√≥n de valores?",
                        options: ["==", "=", ":", "->"],
                        correct: 1,
                        explanation: "El signo `=` asigna un valor a una variable. El `==` se usa para comparar."
                    }
                ]
            },
            {
                id: 'control',
                title: 'M√≥dulo 2: Estructuras de Control',
                icon: <RefreshCw size={24} />,
                description: 'Condicionales (if) y Bucles (while/for).',
                theory: [
                    {
                        title: 'Condicionales',
                        content: 'Permiten tomar decisiones. Usamos operadores de comparaci√≥n (==, !=, >, <) y l√≥gica (and, or).',
                        code: `if opcion == 1:\n    print("Elegiste 1")\nelse:\n    print("Otra opci√≥n")`
                    },
                    {
                        title: 'Bucles Indefinidos (While)',
                        content: 'Se ejecutan mientras una condici√≥n sea verdadera. `while True` es com√∫n para men√∫s, usando `break` para salir.',
                        code: `while True:\n    if salir:\n        break`
                    },
                    {
                        title: 'Enumeraci√≥n',
                        content: '`enumerate()` es ideal para recorrer listas obteniendo al mismo tiempo la posici√≥n y el valor.',
                        code: `for i, item in enumerate(lista):\n    print(i, item)`
                    }
                ],
                projectLink: 'L√≥gica fundamental para men√∫s y validaciones.',
                quiz: [
                    {
                        question: "¬øQu√© operador se usa para preguntar si dos valores son IGUALES?",
                        options: ["=", "==", "!=", "<>"],
                        correct: 1,
                        explanation: "`=` es asignaci√≥n, `==` es comparaci√≥n de igualdad."
                    },
                    {
                        question: "En un men√∫ con `while True`, ¬øqu√© instrucci√≥n detiene el bucle?",
                        options: ["stop", "continue", "break", "exit loop"],
                        correct: 2,
                        explanation: "`break` interrumpe inmediatamente el flujo del bucle y salta a la primera l√≠nea fuera de √©l."
                    },
                    {
                        question: "¬øQu√© imprime el siguiente c√≥digo?",
                        code: `if 5 > 10:\n    print("A")\nelse:\n    print("B")`,
                        options: ["A", "B", "A y B", "Nada"],
                        correct: 1,
                        explanation: "La condici√≥n `5 > 10` es Falsa, por lo tanto se ejecuta el bloque `else`."
                    },
                    {
                        question: "¬øQu√© funci√≥n permite obtener √≠ndice y valor al recorrer una lista?",
                        code: `for i, x in ____(lista):`,
                        options: ["range", "enumerate", "list", "count"],
                        correct: 1,
                        explanation: "`enumerate` devuelve pares (√≠ndice, elemento), √∫til para mostrar listas numeradas."
                    },
                    {
                        question: "Si quiero que un bucle salte a la siguiente iteraci√≥n sin terminar el ciclo, uso:",
                        options: ["break", "pass", "return", "continue"],
                        correct: 3,
                        explanation: "`continue` omite el resto del c√≥digo dentro del bucle para esa vuelta y pasa a la siguiente condici√≥n."
                    },
                    {
                        question: "¬øCu√°ntas veces se ejecuta `for i in range(5)`?",
                        options: ["4 veces (0 a 3)", "5 veces (1 a 5)", "5 veces (0 a 4)", "Infinitas"],
                        correct: 2,
                        explanation: "`range(5)` genera la secuencia 0, 1, 2, 3, 4."
                    },
                    {
                        question: "¬øQu√© sucede si no actualizo la condici√≥n en un `while` normal (no True)?",
                        options: ["Da error de sintaxis", "Se crea un bucle infinito", "Se detiene solo", "Python lo corrige"],
                        correct: 1,
                        explanation: "Si la condici√≥n nunca se vuelve Falsa, el bucle nunca termina (Loop Infinito)."
                    }
                ]
            },
            {
                id: 'datos',
                title: 'M√≥dulo 3: Listas y Diccionarios',
                icon: <Layers size={24} />,
                description: 'Organizaci√≥n de datos en memoria.',
                theory: [
                    {
                        title: 'Listas',
                        content: 'Colecciones ordenadas. Se pueden modificar. `append` agrega al final. Se accede por √≠ndice empezando en 0.',
                        code: `items = ["A", "B"]\nitems.append("C")\nprint(items[0]) # "A"`
                    },
                    {
                        title: 'Diccionarios',
                        content: 'Estructuras Clave-Valor. Ideales para datos etiquetados. Se accede por la clave.',
                        code: `datos = {"nombre": "Leo", "edad": 20}\nprint(datos["nombre"])`
                    },
                    {
                        title: 'Listas de Diccionarios',
                        content: 'Patr√≥n com√∫n para bases de datos en memoria: una lista donde cada fila es un diccionario.',
                        code: `usuarios = [{"id":1}, {"id":2}]`
                    }
                ],
                projectLink: 'Estructuras base para gestionar colecciones de informaci√≥n.',
                quiz: [
                    {
                        question: "¬øC√≥mo agrego un elemento nuevo al final de una lista?",
                        options: ["lista.add()", "lista.push()", "lista.append()", "lista.insert()"],
                        correct: 2,
                        explanation: "El m√©todo `.append()` a√±ade el elemento al final de la lista existente."
                    },
                    {
                        question: "En el diccionario `p = {'color': 'rojo'}`, ¬øc√≥mo accedo al valor 'rojo'?",
                        options: ["p[0]", "p['rojo']", "p['color']", "p.color"],
                        correct: 2,
                        explanation: "Los diccionarios usan sus claves (keys) para acceder a los valores asociados."
                    },
                    {
                        question: "Tengo una lista de alumnos donde cada alumno es un diccionario. ¬øC√≥mo accedo al nombre del primer alumno?",
                        code: `alumnos = [{"nom": "Ana"}, {"nom": "Lu"}]`,
                        options: ["alumnos['nom']", "alumnos[0]['nom']", "alumnos['nom'][0]", "alumnos.get('nom')"],
                        correct: 1,
                        explanation: "Primero accedo al √≠ndice 0 de la lista (`alumnos[0]`) y luego a la clave del diccionario (`['nom']`)."
                    },
                    {
                        question: "¬øQu√© devuelve `len(lista)`?",
                        options: ["El √∫ltimo elemento", "La cantidad de elementos", "La suma de elementos", "El peso en memoria"],
                        correct: 1,
                        explanation: "`len()` es una funci√≥n built-in que devuelve la longitud (cantidad de √≠tems) de una colecci√≥n."
                    },
                    {
                        question: "¬øC√≥mo verifico si una lista est√° vac√≠a en un if?",
                        code: `lista = []`,
                        options: ["if lista == 0:", "if not lista:", "if lista.empty():", "if lista is None:"],
                        correct: 1,
                        explanation: "En Python, una lista vac√≠a se eval√∫a como `False`. Por tanto, `not lista` ser√° `True`."
                    },
                    {
                        question: "La t√©cnica para crear una nueva lista filtrando elementos de otra se llama:",
                        code: `[x for x in lista if x > 0]`,
                        options: ["List Filtering", "List Comprehension", "List Loop", "List Reduction"],
                        correct: 1,
                        explanation: "Las comprensiones de lista son una forma concisa y 'pythonica' de crear listas."
                    },
                    {
                        question: "¬øQu√© pasa si intento acceder a una clave que no existe en un diccionario?",
                        options: ["Devuelve None", "Crea la clave", "Da error (KeyError)", "Devuelve 0"],
                        correct: 2,
                        explanation: "Acceder directamente con corchetes `[]` a una clave inexistente provoca un error que detiene el programa."
                    }
                ]
            },
            {
                id: 'funciones',
                title: 'M√≥dulo 4: Funciones',
                icon: <Box size={24} />,
                description: 'Modularizaci√≥n y reutilizaci√≥n de c√≥digo.',
                theory: [
                    {
                        title: 'Definici√≥n y Llamada',
                        content: '`def` define el bloque de c√≥digo. La funci√≥n solo se ejecuta cuando se la llama con par√©ntesis `()`',
                        code: `def saludar():\n    print("Hola")\n\nsaludar() # Llamada`
                    },
                    {
                        title: 'Par√°metros',
                        content: 'Variables que la funci√≥n espera recibir para trabajar. Hacen que la funci√≥n sea flexible.',
                        code: `def sumar(a, b): ...`
                    },
                    {
                        title: 'M√≥dulos',
                        content: '`import` permite traer funciones de otros archivos o librer√≠as est√°ndar (como random).',
                        code: `import random\nx = random.randint(1, 10)`
                    }
                ],
                projectLink: 'Clave para ordenar y no repetir c√≥digo.',
                quiz: [
                    {
                        question: "¬øQu√© palabra clave se usa para definir una funci√≥n?",
                        options: ["function", "func", "def", "define"],
                        correct: 2,
                        explanation: "En Python se utiliza `def` seguido del nombre de la funci√≥n y par√©ntesis."
                    },
                    {
                        question: "Si tengo `def menu():`, ¬øc√≥mo ejecuto esa funci√≥n?",
                        options: ["menu", "call menu", "menu()", "run menu"],
                        correct: 2,
                        explanation: "El nombre de la funci√≥n debe ir seguido de par√©ntesis `()` para indicar ejecuci√≥n."
                    },
                    {
                        question: "¬øQu√© son los valores dentro de los par√©ntesis en `def calcular(a, b):`?",
                        options: ["Resultados", "Par√°metros", "Librer√≠as", "Variables globales"],
                        correct: 1,
                        explanation: "Son par√°metros: variables locales que recibir√°n los datos enviados al llamar a la funci√≥n."
                    },
                    {
                        question: "Para usar funciones matem√°ticas avanzadas o aleatoriedad, debo usar:",
                        options: ["include", "using", "import", "require"],
                        correct: 2,
                        explanation: "`import` carga m√≥dulos externos o de la librer√≠a est√°ndar (ej: `import random`)."
                    },
                    {
                        question: "Para elegir un elemento al azar de una lista, uso:",
                        options: ["random.choice(lista)", "lista.random()", "random.pick(lista)", "choice(lista)"],
                        correct: 0,
                        explanation: "`choice` es una funci√≥n del m√≥dulo `random` que selecciona un elemento aleatorio."
                    },
                    {
                        question: "Si menciono el nombre de una funci√≥n sin par√©ntesis `x = saludar`, ¬øqu√© pasa?",
                        options: ["Se ejecuta la funci√≥n", "Da error", "Asigno la funci√≥n a la variable x, pero no se ejecuta", "Se borra la funci√≥n"],
                        correct: 2,
                        explanation: "Est√°s haciendo referencia al objeto funci√≥n. Para ejecutarla, los par√©ntesis son obligatorios."
                    },
                    {
                        question: "¬øQu√© hace la instrucci√≥n `return`?",
                        options: ["Imprime en pantalla", "Devuelve un valor al c√≥digo que llam√≥ a la funci√≥n", "Reinicia la funci√≥n", "Cierra el programa"],
                        correct: 1,
                        explanation: "`return` finaliza la ejecuci√≥n de la funci√≥n y entrega un resultado."
                    }
                ]
            },
            {
                id: 'archivos',
                title: 'M√≥dulo 5: Lectura y Escritura de Archivos',
                icon: <Save size={24} />,
                description: 'Persistencia de datos en disco (TXT/CSV).',
                theory: [
                    {
                        title: 'Apertura y Modos',
                        content: '`open(ruta, modo)` abre el archivo. Modos: "r" (leer), "w" (escribir/borrar), "a" (agregar al final).',
                        code: `f = open("datos.txt", "w")`
                    },
                    {
                        title: 'Procesamiento de Texto',
                        content: 'Al leer, recibimos texto crudo. `strip()` quita saltos de l√≠nea y `split(",")` separa datos (CSV).',
                        code: `datos = linea.strip().split(",")`
                    },
                    {
                        title: 'Escritura',
                        content: '`write()` espera un string. Es necesario agregar `\\n` manualmente para saltar de l√≠nea.',
                        code: `f.write(f"{dato}\\n")`
                    }
                ],
                projectLink: 'Esencial para guardar informaci√≥n entre ejecuciones.',
                quiz: [
                    {
                        question: "Para abrir un archivo y ESCRIBIR borrando lo anterior, uso el modo:",
                        options: ["'r'", "'a'", "'w'", "'x'"],
                        correct: 2,
                        explanation: "'w' (Write) abre para escritura. Si el archivo existe, lo sobrescribe (borra contenido previo)."
                    },
                    {
                        question: "Si quiero AGREGAR datos al final de un archivo sin borrar lo que tiene, uso:",
                        options: ["'w'", "'r'", "'a'", "'append'"],
                        correct: 2,
                        explanation: "'a' (Append) permite a√±adir contenido al final del archivo preservando lo existente."
                    },
                    {
                        question: "¬øQu√© m√©todo convierte una l√≠nea de texto CSV 'Juan,20' en una lista ['Juan', '20']?",
                        options: ["slice(',')", "split(',')", "divide(',')", "cut(',')"],
                        correct: 1,
                        explanation: "`split()` divide una cadena en subcadenas bas√°ndose en un separador (en este caso, la coma)."
                    },
                    {
                        question: "¬øPor qu√© es importante usar `.close()`?",
                        options: ["Para borrar el archivo", "Para guardar cambios y liberar memoria", "Para formatear el disco", "No es importante"],
                        correct: 1,
                        explanation: "Cerrar el archivo asegura que los datos del buffer se escriban en disco y libera el recurso."
                    },
                    {
                        question: "¬øQu√© funci√≥n lee TODAS las l√≠neas de un archivo y las devuelve en una lista?",
                        options: ["read()", "readlines()", "readline()", "getall()"],
                        correct: 1,
                        explanation: "`readlines()` lee el archivo completo y devuelve una lista donde cada elemento es una l√≠nea."
                    },
                    {
                        question: "Al leer una l√≠nea de un archivo de texto, ¬øqu√© car√°cter invisible suele venir al final?",
                        options: ["\\t (tab)", "\\0 (null)", "\\n (salto de l√≠nea)", "EOF"],
                        correct: 2,
                        explanation: "Las l√≠neas en archivos de texto terminan con un car√°cter de salto de l√≠nea que usualmente debemos limpiar."
                    },
                    {
                        question: "¬øPara qu√© usamos `.strip()` al leer una l√≠nea?",
                        options: ["Para eliminar espacios y saltos de l√≠nea de los extremos", "Para separar palabras", "Para convertir a may√∫sculas", "Para borrar la l√≠nea"],
                        correct: 0,
                        explanation: "Limpia la cadena eliminando el `\\n` final y espacios en blanco extra al inicio o fin."
                    }
                ]
            }
        ];

        // --- COMPONENTES ---

        const QuizCard = ({ question, index, onAnswer }) => {
            const [selected, setSelected] = useState(null);
            const [showFeedback, setShowFeedback] = useState(false);

            const handleSelect = (idx) => {
                if (showFeedback) return;
                setSelected(idx);
                setShowFeedback(true);
                onAnswer(idx === question.correct);
            };

            const isCorrect = selected === question.correct;

            return (
                <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-4 fade-in relative overflow-hidden">
                    {/* Indicador lateral de estado */}
                    {showFeedback && (
                        <div className={`absolute left-0 top-0 bottom-0 w-1.5 ${isCorrect ? 'bg-emerald-500' : 'bg-amber-500'}`}></div>
                    )}
                    
                    <div className="flex items-start gap-3 mb-4">
                        <div className="bg-indigo-100 text-indigo-700 p-2 rounded-lg font-bold text-sm min-w-[3rem] text-center">
                            P-{index + 1}
                        </div>
                        <div className="flex-1">
                            <h3 className="font-semibold text-slate-800 text-lg leading-snug">{question.question}</h3>
                            {question.code && (
                                <pre className="mt-3 bg-slate-900 text-indigo-100 p-3 rounded-md text-sm font-mono overflow-x-auto border border-slate-700 shadow-inner">
                                    {question.code}
                                </pre>
                            )}
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {question.options.map((opt, idx) => {
                            let btnClass = "p-3 rounded-lg text-left transition-all border relative ";
                            if (!showFeedback) {
                                btnClass += "border-slate-200 hover:border-indigo-400 hover:bg-indigo-50 cursor-pointer hover:shadow-sm";
                            } else {
                                if (idx === question.correct) btnClass += "bg-emerald-50 border-emerald-500 text-emerald-800 font-medium shadow-sm";
                                else if (idx === selected) btnClass += "bg-red-50 border-red-500 text-red-800 opacity-75";
                                else btnClass += "opacity-40 border-slate-200 grayscale";
                            }

                            return (
                                <button key={idx} onClick={() => handleSelect(idx)} className={btnClass} disabled={showFeedback}>
                                    <span className="mr-2 opacity-60 font-mono text-xs">[{["A","B","C","D"][idx]}]</span>
                                    {opt}
                                    {showFeedback && idx === question.correct && <CheckCircle size={18} className="absolute top-3 right-3 text-emerald-600" />}
                                </button>
                            );
                        })}
                    </div>

                    {showFeedback && (
                        <div className={`mt-4 p-4 rounded-lg flex items-start gap-3 fade-in ${isCorrect ? 'bg-emerald-50 text-emerald-900 border border-emerald-100' : 'bg-amber-50 text-amber-900 border border-amber-100'}`}>
                            {isCorrect ? <CheckCircle size={20} className="mt-0.5 shrink-0 text-emerald-600" /> : <AlertCircle size={20} className="mt-0.5 shrink-0 text-amber-600" />}
                            <div>
                                <p className="font-bold text-sm mb-1">{isCorrect ? "¬°Excelente! Respuesta Correcta" : "Respuesta Incorrecta"}</p>
                                <p className="text-sm opacity-90 leading-relaxed">{question.explanation}</p>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const ModuleView = ({ module, onBack, onComplete }) => {
            const [score, setScore] = useState(0);
            const [answeredCount, setAnsweredCount] = useState(0);

            const handleAnswer = (isCorrect) => {
                if (isCorrect) setScore(s => s + 1);
                const newCount = answeredCount + 1;
                setAnsweredCount(newCount);
                
                if (newCount === module.quiz.length) {
                    onComplete(module.id, 100); 
                } else {
                    onComplete(module.id, Math.round((newCount / module.quiz.length) * 100));
                }
            };

            return (
                <div className="fade-in max-w-4xl mx-auto pb-12">
                    <button onClick={onBack} className="flex items-center text-slate-500 hover:text-indigo-600 mb-6 font-medium transition-colors group">
                        <div className="p-1 rounded-full bg-slate-100 group-hover:bg-indigo-100 mr-2 transition-colors">
                            <Home size={16} />
                        </div>
                        Volver al Tablero
                    </button>

                    <div className="bg-white rounded-2xl p-8 shadow-sm border border-slate-200 mb-8 relative overflow-hidden">
                        <div className="absolute top-0 right-0 p-8 opacity-5 transform translate-x-1/4 -translate-y-1/4 pointer-events-none">
                            {React.cloneElement(module.icon, { size: 200 })}
                        </div>

                        <div className="flex items-center gap-4 mb-6 relative z-10">
                            <div className="p-4 bg-gradient-to-br from-indigo-500 to-purple-600 text-white rounded-2xl shadow-lg ring-4 ring-indigo-50">
                                {React.cloneElement(module.icon, { size: 40 })}
                            </div>
                            <div>
                                <h1 className="text-3xl font-bold text-slate-800">{module.title}</h1>
                                <p className="text-slate-500 mt-1 text-lg">{module.description}</p>
                            </div>
                        </div>

                        <div className="grid md:grid-cols-2 gap-8 relative z-10">
                            <div>
                                <h2 className="text-xl font-bold text-slate-800 mb-4 flex items-center">
                                    <BookOpen size={20} className="mr-2 text-indigo-500" /> Repaso Te√≥rico
                                </h2>
                                <div className="space-y-6">
                                    {module.theory.map((item, idx) => (
                                        <div key={idx} className="group">
                                            <h3 className="font-semibold text-slate-700 mb-2 flex items-center gap-2">
                                                <div className="w-1.5 h-1.5 rounded-full bg-indigo-400"></div>
                                                {item.title}
                                            </h3>
                                            <p className="text-slate-600 text-sm mb-3 leading-relaxed pl-4 border-l-2 border-slate-100 ml-0.5">{item.content}</p>
                                            <div className="bg-slate-900 rounded-lg p-4 overflow-hidden shadow-md relative ml-4 group-hover:shadow-lg transition-shadow">
                                                <div className="absolute top-0 left-0 w-1 h-full bg-indigo-500"></div>
                                                <pre className="text-xs text-indigo-100 font-mono overflow-x-auto custom-scrollbar">
                                                    <code>{item.code}</code>
                                                </pre>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-slate-50 rounded-xl p-6 border border-slate-200 h-fit sticky top-24">
                                <h2 className="text-lg font-bold text-slate-800 mb-2 flex items-center">
                                    <Code size={20} className="mr-2 text-emerald-600" /> Enfoque Pr√°ctico
                                </h2>
                                <p className="text-sm text-slate-600 mb-4">
                                    Aplicaci√≥n de estos conceptos: <br/>
                                    <span className="font-semibold text-emerald-700 block mt-1 p-2 bg-emerald-100 rounded border border-emerald-200 shadow-sm">
                                        <FileText size={14} className="inline mr-1" />
                                        {module.projectLink}
                                    </span>
                                </p>
                                <div className="bg-amber-50 border border-amber-200 rounded-lg p-4 text-sm text-amber-800 flex gap-3">
                                    <AlertCircle size={24} className="shrink-0 mt-0.5 text-amber-600" />
                                    <p>¬°Consejo! Las preguntas est√°n dise√±adas para detectar errores comunes de sintaxis y l√≥gica.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div className="flex items-center justify-between mb-6 bg-slate-100 p-4 rounded-xl border border-slate-200">
                            <h2 className="text-xl font-bold text-slate-800 flex items-center gap-2">
                                <PenTool size={20} className="text-slate-500" />
                                Desaf√≠o Pr√°ctico ({module.quiz.length} preguntas)
                            </h2>
                            <div className="flex items-center gap-3">
                                <div className="text-sm font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full">
                                    {answeredCount} / {module.quiz.length}
                                </div>
                                <div className="w-32 h-2.5 bg-slate-200 rounded-full overflow-hidden border border-slate-300">
                                    <div 
                                        className="h-full bg-indigo-500 progress-bar shadow-[0_0_10px_rgba(99,102,241,0.5)]" 
                                        style={{ width: `${(answeredCount / module.quiz.length) * 100}%` }}
                                    ></div>
                                </div>
                            </div>
                        </div>

                        <div className="space-y-6">
                            {module.quiz.map((q, idx) => (
                                <QuizCard key={idx} question={q} index={idx} onAnswer={handleAnswer} />
                            ))}
                        </div>

                        {answeredCount === module.quiz.length && (
                            <div className="mt-8 p-8 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl text-white text-center shadow-xl fade-in transform transition-all ring-4 ring-indigo-100">
                                <div className="mb-4 inline-block p-4 bg-white/20 rounded-full backdrop-blur-sm">
                                     {score >= Math.ceil(module.quiz.length * 0.7) ? <CheckCircle size={40} /> : <BookOpen size={40} />}
                                </div>
                                <h3 className="text-3xl font-bold mb-2">
                                    {score >= Math.ceil(module.quiz.length * 0.7) ? "¬°Excelente Trabajo! üåü" : "¬°M√≥dulo Completado! üëç"}
                                </h3>
                                <p className="text-indigo-100 text-lg mb-6 max-w-md mx-auto">
                                    Has acertado <span className="font-bold text-white bg-white/20 px-2 py-0.5 rounded">{score} de {module.quiz.length}</span> preguntas. 
                                    {score < Math.ceil(module.quiz.length * 0.7) ? " Te recomiendo repasar la teor√≠a y volver a intentarlo." : " ¬°Dominas este tema!"}
                                </p>
                                <button onClick={onBack} className="bg-white text-indigo-700 px-8 py-3 rounded-xl font-bold hover:bg-indigo-50 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                                    Volver al Men√∫ Principal
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [currentModule, setCurrentModule] = useState(null);
            const [progressMap, setProgressMap] = useState({
                'fundamentos': 0,
                'control': 0,
                'datos': 0,
                'funciones': 0,
                'archivos': 0
            });

            const updateProgress = (moduleId, percent) => {
                setProgressMap(prev => ({
                    ...prev,
                    [moduleId]: Math.max(prev[moduleId], percent)
                }));
            };

            const totalModules = modulesData.length;
            const totalProgress = Object.values(progressMap).reduce((a, b) => a + b, 0) / totalModules;

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-indigo-100 selection:text-indigo-900">
                    <header className="glass-panel border-b border-slate-200 sticky top-0 z-30 shadow-sm">
                        <div className="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <div className="bg-indigo-600 p-2 rounded-lg text-white shadow-md transform hover:scale-105 transition-transform">
                                    <Terminal size={20} />
                                </div>
                                <div>
                                    <h1 className="font-bold text-slate-800 text-lg leading-tight">Nivelaci√≥n: Algoritmos</h1>
                                    <p className="text-xs text-slate-500 font-medium hidden md:block">Pr√°ctica de Recuperaci√≥n - 5to A√±o</p>
                                </div>
                            </div>
                            
                            <div className="flex flex-col items-end w-1/3 md:w-1/4">
                                <div className="flex justify-between w-full text-xs font-bold text-slate-600 mb-1">
                                    <span>Avance Global</span>
                                    <span>{Math.round(totalProgress)}%</span>
                                </div>
                                <div className="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden border border-slate-200">
                                    <div 
                                        className="h-full bg-gradient-to-r from-emerald-400 to-emerald-600 progress-bar shadow-[0_0_10px_rgba(52,211,153,0.4)]" 
                                        style={{ width: `${totalProgress}%` }}
                                    ></div>
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-5xl mx-auto px-4 py-8">
                        {!currentModule ? (
                            <div className="fade-in">
                                <div className="text-center mb-10 py-8">
                                    <h2 className="text-3xl md:text-5xl font-extrabold text-slate-900 mb-6 tracking-tight">
                                        Gu√≠a de Estudio <span className="text-indigo-600">Interactiva</span>
                                    </h2>
                                    <p className="text-slate-600 max-w-2xl mx-auto text-lg leading-relaxed">
                                        Esta gu√≠a te ayudar√° a reforzar los conceptos fundamentales vistos durante el a√±o.
                                        <span className="block mt-2 font-medium text-slate-800">Completa los 5 m√≥dulos para nivelar tus conocimientos.</span>
                                    </p>
                                </div>

                                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {modulesData.map((mod) => {
                                        const percent = progressMap[mod.id] || 0;
                                        const isComplete = percent === 100;

                                        return (
                                            <button 
                                                key={mod.id} 
                                                onClick={() => setCurrentModule(mod)}
                                                className="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-xl hover:border-indigo-300 hover:-translate-y-1 transition-all duration-300 text-left group relative overflow-hidden"
                                            >
                                                <div className="absolute top-0 left-0 w-full h-1.5 bg-slate-100">
                                                    <div 
                                                        className={`h-full ${isComplete ? 'bg-emerald-500' : 'bg-indigo-500'} progress-bar`} 
                                                        style={{ width: `${percent}%` }}
                                                    ></div>
                                                </div>

                                                <div className="flex items-start justify-between mb-4 mt-2">
                                                    <div className={`p-3 rounded-xl transition-all duration-300 ${isComplete ? 'bg-emerald-100 text-emerald-600' : 'bg-indigo-50 text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white shadow-sm'}`}>
                                                        {mod.icon}
                                                    </div>
                                                    {isComplete ? (
                                                        <div className="bg-emerald-100 text-emerald-700 text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1 shadow-sm border border-emerald-200">
                                                            <CheckCircle size={12} /> Completado
                                                        </div>
                                                    ) : (
                                                        <div className="text-xs font-bold text-slate-400 bg-slate-100 px-3 py-1 rounded-full border border-slate-200">
                                                            {percent}%
                                                        </div>
                                                    )}
                                                </div>
                                                
                                                <h3 className="text-lg font-bold text-slate-800 mb-2 group-hover:text-indigo-600 transition-colors">{mod.title}</h3>
                                                <p className="text-slate-500 text-sm leading-relaxed mb-4 min-h-[40px]">{mod.description}</p>
                                                
                                                <div className="flex items-center text-sm font-bold text-indigo-600 group-hover:translate-x-2 transition-transform">
                                                    {percent > 0 ? 'Continuar Repaso' : 'Comenzar'} <ChevronRight size={16} className="ml-1" />
                                                </div>
                                            </button>
                                        );
                                    })}
                                </div>
                                
                                <div className="mt-16 bg-white border border-indigo-100 rounded-3xl p-8 shadow-lg flex flex-col md:flex-row items-center gap-8 relative overflow-hidden">
                                    <div className="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full blur-2xl opacity-60"></div>
                                    
                                    <div className="bg-indigo-50 p-6 rounded-full text-indigo-600 relative z-10 ring-8 ring-indigo-50/50">
                                        <Play size={40} fill="currentColor" />
                                    </div>
                                    <div className="text-center md:text-left relative z-10 flex-1">
                                        <h3 className="font-bold text-slate-800 text-2xl mb-2">¬°A Practicar!</h3>
                                        <p className="text-slate-600 text-lg leading-relaxed">
                                            Recuerda que la programaci√≥n se aprende programando. Analiza cada error y entiende el "por qu√©" de cada respuesta.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <ModuleView 
                                module={currentModule} 
                                onBack={() => setCurrentModule(null)} 
                                onComplete={updateProgress}
                            />
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>